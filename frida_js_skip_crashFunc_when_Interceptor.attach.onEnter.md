【文件描述】 解决frida拦截目标进程中途崩溃 步骤

简要说明:  真正导致崩溃的函数 是 调用链上层的 某个函数h， 而 崩溃时 最后打印的是 该调用链条最下层的 函数g。  这里 h是 真崩函数 ， 而 g是 假崩函数

### 跳过崩溃函数 步骤 概述
#### 术语
- 【术语】 真崩函数 == 致崩函数 == 导致 目标进程中途崩溃的函数

- 【术语】 目标进程正常运行==目标进程不会崩溃
 
- 【术语】 Intereptor.attach.onEnter == onEnter
 
- 【术语】 崩尾函数 == 尾onEnter函数名== 最后onEnter打印的函数名  
 
         注意Intereptor.attach是安装onEnter , 这里说的是运行onEnter
 
- 【术语】 崩尾函数们 == 真崩函数们 + 崩尾假崩函数们
 
- 【术语】 假崩函数 == 崩尾假崩函数 == 一种  崩尾函数 == 即使 不跳过 该 崩尾函数  仍然 目标进程正常运行

#### 步骤 概述
 解决frida拦截目标进程中途崩溃 步骤为:
 1. 跳过 崩尾函数 ，重复此步至不再崩溃；   

         崩尾函数们 ==  真崩函数们 + 假崩函数们 
 
 2. 删 假崩函数 ； 形成 真崩函数们

         真崩函数 可能是 调用链上层的 某个函数h， 而 崩溃时 最后打印的是 该调用链条最下层的 函数g。  
         这里 h是 真崩函数 ， 而 g是 假崩函数
           若 拦截 某崩尾函数h  后，   目标进程 立刻崩溃， 则 该崩尾函数h 是 真崩函数
           若 拦截 某崩尾函数g  后，   目标进程 正常运行， 则 该崩尾函数g 是 假崩函数


### 跳过崩溃函数 步骤 举例
#### 例子内容
举例

         假设存在某个调用链条 从上层到下层 依次是 g0/g1/g2/g3/g4/g5/g6/g7 ， 且假设其中真正导致崩溃的是函数g5 ， 
            当 目标进程崩溃时 ， 最后onEnter打印的函数名 是 g7

算法执行步骤如下:

#### 步骤1
##### 术语
- 【术语】 重执行 == 重新执行frida+InterceptFnSym.ts+目标进程qphotorec

- 【术语】 跳过函数g7 == 在InterceptFnSym.ts中书写  不对  函数g7 做 Interceptor.attach

##### 步骤1. 跳过 崩尾函数 ，重复此步至不崩； 形成 崩尾函数 们


 
 
 步骤1.a. 
 
         因g7为崩尾函数 故 跳过函数g7

         重执行 ， 目标进程崩溃 ， 崩尾函数 是 g6

 步骤1.b.

         跳过 函数g6
         重执行 ， 目标进程崩溃 ， 崩尾函数 是 g5
          
 步骤1.c.

         跳过 函数g5
          重执行 , 目标进程正常执行
          此时 崩尾函数们 == {函数g7, 函数g6, 函数g5} == 真崩函数们 + 假崩函数们

#### 步骤2
##### 术语
- 【术语】  '拍脑袋假设 函数g6  是 假崩函数 ， 即 从 崩尾函数们 中 删除 函数g6，即 不跳过 函数g6 ，即 拦截 函数g6'   == 拍脑袋要拦截函数g6

##### 步骤2. 删 假崩函数 ； 形成 真崩函数们
 
 步骤2.a. 

         拍脑袋要拦截函数g6 ， 故  崩尾函数们 == {函数g5 , 函数g7} 【跳过  这些函数】
         重执行 ， 目标进程正常执行 ， 因此 函数g6 是 假崩函数 ， 
           崩尾函数们 == {函数g5 , 函数g7}， 假崩函数们 == {函数g6}
 
 步骤2.b. 
 
         拍脑袋要拦截函数g7 ， 故  崩尾函数们 == {函数g5} 【跳过  这些函数】
         重执行 ，目标进程正常执行 ， 因此 函数g7 是 假崩函数 ， 
           崩尾函数们 == {函数g5}， 假崩函数们 == {函数g6, 函数g7}
 
 步骤2.c. 
 
          拍脑袋要拦截函数g5 ， 故  崩尾函数们 == {} 【跳过  {}】  【因空集此时已可定论，但读者可假想此时非空集】
          重执行, 目标进程崩溃, 因此 函数g5 是 真崩函数 ，
            崩尾函数们 == {函数g5}， 假崩函数们 == {函数g6, 函数g7}
              此即上一步骤末尾的状态
          结束, 真崩函数们 == {函数g5}， 假崩函数们 == {函数g6, 函数g7}